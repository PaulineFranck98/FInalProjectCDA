{% extends 'base.html.twig' %}

{% block title %}Vos itinéraires {% endblock %}


{% block body %}

<section id="profile-dashboard" class="py-10 ">
    <div class="max-w-7xl mx-auto px-6 flex min-h-0 lg:h-[calc(100vh-49px)] gap-6">

        {% include 'profile/partials/_profile_aside.html.twig' %}

        <section id="profile-container"
            class="rounded-xl border border-gray-200 w-full  p-8  overflow-y-auto  scrollbar-hide bg-gray-50 ">

            <h2 class="text-2xl font-semibold text-violet-700 mb-8">Mes itinéraires</h2>

            {% if itinerariesData is empty %}
            <p class="text-gray-500 text-center py-10">Vous n’avez encore créé aucun itinéraire.</p>
            {% else %}
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
                {% for data in itinerariesData %}
                {% set itinerary = data.itinerary %}
                {% set departure = data.departure %}
                {% set arrival = data.arrival %}

                <div
                    class="border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition bg-white">
                    <div>
                        <h3 class="text-violet-700 font-semibold text-lg mb-3 truncate">{{ itinerary.itineraryName }}
                        </h3>

                        {% if departure or arrival %}
                        <div class="flex items-center mb-3 text-gray-700">
                            <i class="fa-solid fa-map-location-dot mr-2 text-violet-600"></i>
                            <p class="text-sm">
                                {% if departure %}<span class="font-medium">Départ :</span> {{ departure }}{% endif %}
                                {% if departure and arrival %}<span class="mx-2 text-gray-400">→</span>{% endif %}
                                {% if arrival %}<span class="font-medium">Arrivée :</span> {{ arrival }}{% endif %}
                            </p>
                        </div>
                        {% endif %}

                        {% if itinerary.departureDate %}
                        <p class="text-sm text-gray-600 mb-1">
                            <i class="fa-regular fa-clock mr-1 text-violet-600"></i>
                            Départ le {{ itinerary.departureDate|date('d/m/Y') }}
                        </p>
                        {% endif %}

                        {% if itinerary.duration %}
                        <p class="text-sm text-gray-600 mb-1">
                            <i class="fa-solid fa-route mr-1 text-violet-600"></i>
                            Durée : {{ itinerary.duration }} jour{{ itinerary.duration > 1 ? 's' }}
                        </p>
                        {% endif %}

                        <p
                            class="text-xs mt-3 inline-block px-2 py-1 rounded-full 
                                    {{ itinerary.isPublic ? 'bg-green-100 text-green-700' : 'bg-gray-200 text-gray-700' }}">
                            {{ itinerary.isPublic ? 'Public' : 'Privé' }}
                        </p>
                    </div>

                    <div class="mt-4 flex justify-end">
                        <a href="{{ path('itinerary_detail', { itineraryId: itinerary.id }) }}"
                            class="text-sm bg-violet-700 text-white px-3 py-1 rounded-md hover:bg-violet-800 transition"
                            title="Voir le détail de l'itinéraire">
                            Voir
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </section>
    </div>
</section>

{% endblock %}