{% extends 'base.html.twig' %}

{% block stylesheets %}
{{ parent() }}
<link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/css/star-rating.min.css" media="all"
    rel="stylesheet" type="text/css" />
<link href="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.css" media="all"
    rel="stylesheet" type="text/css" />
{% endblock %}

{% block body %}
<section class="flex justify-center w-full">
    <div class="flex flex-col items-center justify-center w-full max-w-9/12 md:max-w-lg mt-20">

        <h2 class="mb-8 text-xl text-center">
            Modifier votre avis sur
            <span class="font-semibold text-violet-800">
                "{{ location.locationName ?? 'cet établissement' }}"
            </span>
        </h2>

        {{ form_start(form, { attr: { class: 'w-full' } }) }}

        <div class="flex justify-center w-full mb-4">
            {{ form_row(form.rating, { attr: { class: 'w-full' } }) }}
        </div>

        {{ form_row(form.comment, { attr: { class: 'resize-none border border-gray-300 rounded-xl w-full h-40 p-3',
        maxlength: 150 }}) }}

        <div class="flex flex-col mt-8 gap-4">
            {{ form_row(form.valider, { attr: { class: 'bg-violet-800 px-12 py-2 text-white font-medium text-center
            w-full rounded-xl btn-violet' }, label: 'Mettre à jour' }) }}

            <a href="{{ path('location_detail', { id: rating.locationId }) }}"
                class="text-center text-sm text-gray-500 hover:text-violet-700 underline">
                Annuler et revenir à la page du lieu
            </a>
        </div>

        {{ form_end(form) }}
    </div>
</section>
{% endblock %}

{% block javascripts %}
{{ parent() }}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/js/star-rating.min.js"
    type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/gh/kartik-v/bootstrap-star-rating@4.1.2/themes/krajee-svg/theme.js"></script>

<script>
    $(document).ready(function () {
        $('input[name="rating[rating]"]').rating({
            showClear: false,
            showCaption: false,
        });
    });
</script>
{% endblock %}