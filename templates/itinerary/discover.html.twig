{% extends 'base.html.twig' %}

{% block title %}Découvrir les itinéraires{% endblock %}

{% block meta_description %}
<meta name="description"
    content="Découvrez les itinéraires créés et partagés par la communauté ShareMyWay. Filtrez par durée, explorez les idées de voyage et trouvez l'inspiration pour vos prochaines aventures.">
{% endblock %}

{% block body %}

<section class="w-full  bg-gradient-to-b from-gray-50 to-white">
    <div class="max-w-7xl mx-auto px-6 py-10">
        <h1 class="text-3xl font-bold text-violet-800 mb-10 text-center flex items-center justify-center gap-3">
            <i class="fa-solid fa-route text-violet-700 text-2xl"></i>
            Découvrez les itinéraires des autres membres
        </h1>
        <form id="filtersForm"
            class="mb-10 grid grid-cols-1 md:grid-cols-3 gap-5 bg-white p-5 rounded-xl shadow-sm border border-gray-200">
            <input type="hidden" name="page" id="pageInput" value="{{ filters.page ?? 1 }}" />
            <div>
                <label for="duration" class="text-sm text-gray-700 mb-1 block">Durée (jours)</label>
                <input id="duration" type="number" name="duration" min="1" value="{{ filters.duration ?? '' }}"
                    class="w-full border border-gray-300 rounded-md p-2 text-sm bg-white focus:ring-2 focus:ring-violet-300 focus:border-violet-500 transition">
            </div>
            <div>
                <label for="sort" class="text-sm text-gray-700 mb-1 block">Trier par</label>
                <select id="sort" name="sort"
                    class="w-full border border-gray-300 rounded-md p-2 text-sm bg-white focus:ring-2 focus:ring-violet-300 focus:border-violet-500 transition">
                    <option value="recent" {% if filters.sort=='recent' %}selected{% endif %}>Les plus récents</option>
                    <option value="old" {% if filters.sort=='old' %}selected{% endif %}>Les plus anciens</option>
                </select>
            </div>
        </form>
        {# aria-live="polite" : prévient le lecteur d'écran lorsque le contenu change #}
        <div id="itinerariesContainer" aria-live="polite">
            {% include 'itinerary/partials/_list.html.twig' with {
            'itinerariesData': itinerariesData,
            'pagination': pagination,
            'filters': filters
            } %}
        </div>
    </div>
</section>

<script src="{{ asset('js/itinerary-search.js') }}"></script>
<script src="{{ asset('js/itinerary-favorite.js') }}"></script>

{% endblock %}