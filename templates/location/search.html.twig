{% extends 'base.html.twig' %}
{% block title %}Recherche de lieux{% endblock %}

{% block body %}
<div class="flex flex-col lg:flex-row gap-8 mt-10">
 
    <div class="lg:w-1/2 flex flex-col gap-8">
      
        <form method="get" class="flex flex-col gap-4 bg-white rounded-xl p-6 shadow">
            <div class="flex flex-col lg:flex-row gap-4">
                <input type="text" name="city" placeholder="Ville" class="border rounded px-4 py-2 w-full lg:w-1/3" />
                <select name="price" class="border rounded px-4 py-2 w-full lg:w-1/3">
                    <option value="">Prix</option>

                    {% for price in prices %}
                        <option value="{{ price.id }}">{{ price.priceRange }}</option>
                    {% endfor %}
                </select>
                <select name="type" class="border rounded px-4 py-2 w-full lg:w-1/3">
                    <option value="">Type</option>
                    {% for type in types %}
                        <option value="{{ type.id }}">{{ type.typeName }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="button" class="text-violet-800 underline mt-2" id="show-more-filters">Voir plus de filtres</button>
            <div id="more-filters" class="hidden">
              
                <select name="duration" class="border rounded px-4 py-2">
                    <option value="">Durée</option>
                    {% for duration in durations %}
                        <option value="{{ duration.id }}">{{ duration.onSiteTime }}</option>
                    {% endfor %}
                </select>
                <select name="confort" class="border rounded px-4 py-2">
                    <option value="">Confort</option>
                    {% for confort in conforts %}
                        <option value="{{ confort.id }}">{{ confort.confortLevel }}</option>
                    {% endfor %}
                </select>
                <select name="intensity" class="border rounded px-4 py-2">
                    <option value="">Intensité</option>
                    {% for intensity in intensities %}
                        <option value="{{ intensity.id }}">{{ intensity.intensityLevel }}</option>
                    {% endfor %}
                </select>
                <select name="theme" class="border rounded px-4 py-2">
                    <option value="">Thème</option>
                    {% for theme in themes %}
                        <option value="{{ theme.id }}">{{ theme.themeName }}</option>
                    {% endfor %}
                </select>
                <select name="companion" class="border rounded px-4 py-2">
                    <option value="">Compagnon</option>
                    {% for companion in companions %}
                        <option value="{{ companion.id }}">{{ companion.companionName }}</option>
                    {% endfor %}
                </select>
            </div>
            <button type="submit" class="bg-violet-800 text-white px-6 py-2 rounded-xl mt-4">Rechercher</button>
        </form>
    
        <div class="mt-8 flex flex-col gap-4">
            {% for location in locations %}
                <a href="{{ path('location_detail', {'id': location.id}) }}" class="block">
                    <p class="font-medium border-violet-600 hover:bg-violet-600 hover:text-white transition-colors duration-300 ease-in-out border px-4 py-2 rounded cursor-pointer">{{ location.locationName }}</p>
                </a>
            {% else %}
                <p class="text-center text-gray-500">Aucun lieu trouvé.</p>
            {% endfor %}
        </div>
    </div>
   
    <div class="lg:w-1/2 mt-8 lg:mt-0">
        <div id="map" class="w-full h-96 bg-gray-200 rounded-xl flex items-center justify-center">
            <span class="text-gray-500">Carte</span>
        </div>
    </div>
</div>
<script>
    document.getElementById('show-more-filters').addEventListener('click', function() {
        const moreFilters = document.getElementById('more-filters');
        moreFilters.classList.toggle('hidden');
        if (!moreFilters.classList.contains('hidden')) {
            moreFilters.classList.add('flex', 'flex-col', 'gap-4', 'mt-4');
        } else {
            moreFilters.classList.remove('flex', 'flex-col', 'gap-4', 'mt-4');
        }
    });
</script>
{% endblock %}
