<div class="flex flex-col gap-2 border border-violet-300 rounded p-3 bg-violet-50">
    <button id="toggleItineraries" type="button"
        class="flex justify-between items-center text-violet-700 font-medium w-full">
        <span><i class="fa-solid fa-map-location-dot mr-2"></i> Mes itinéraires</span>
        <i id="chevron" class="fa-solid fa-chevron-down text-sm transition-transform duration-300 cursor-pointer"></i>
    </button>

    <div id="itineraryList" class="hidden flex flex-col mt-2 text-sm gap-1">
        {% if app.user and app.user.itineraries is not empty%}
        {% for itinerary in app.user.itineraries %}
        <a href="{{ path('itinerary_detail', {'itineraryId': itinerary.id}) }}"
            class="text-violet-700 hover:text-violet-900 hover:bg-violet-100  py-1 px-2 rounded transition">
            {{ itinerary.itineraryName }}
        </a>
        {% endfor %}
        {% else %}
        <p class="text-gray-500 text-xs italic px-2">Aucun itinéraire pour l’instant.</p>
        {% endif %}

        <div class="mt-3 pt-2 border-t border-violet-200 flex justify-center">
            <a href="{{ path('itinerary_new') }}"
                class="w-full inline-flex items-center justify-center bg-violet-600 hover:bg-violet-700 text-white text-sm font-medium px-3 py-1.5 rounded-md transition">
                <i class="fa-solid fa-plus mr-1"></i> Créer un itinéraire
            </a>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const button = document.getElementById('toggleItineraries');
        const list = document.getElementById('itineraryList');
        const chevron = document.getElementById('chevron');

        if (button && list) {
            button.addEventListener('click', () => {
                list.classList.toggle('hidden');
                chevron.classList.toggle('rotate-180');
            });
        }
    });
</script>